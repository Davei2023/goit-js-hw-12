import{a as w,S as q,i as y}from"./vendor-EmsQAAmi.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=a(t);fetch(t.href,o)}})();const n={form:document.querySelector(".form"),input:document.querySelector(".search-inp"),searchBtn:document.querySelector(".search-btn"),gallery:document.querySelector(".gallery"),loadMoreBtn:document.querySelector(".load-btn"),loader:document.querySelector(".loader-container")},m=15,M="42030436-f44bf17f2fc4b636ae2b8b7a9",P=w.create({baseURL:"https://pixabay.com/api/",timeout:1e4,params:{key:M,image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:m}});async function g(e,r=1){const{data:a}=await P.get("",{params:{q:e,page:r}});return a}let s=1,p="",u=0,d=!1;const v=new q(".gallery a",{captionsData:"alt",captionDelay:250});n.form.addEventListener("submit",B);n.loadMoreBtn.addEventListener("click",O);async function B(e){e.preventDefault();const r=n.input.value.trim();if(!r)return c("The search field can't be empty! Please, enter your request!");if(r.length>100)return c("Search query must be 100 characters or less.");p=r,s=1,n.gallery.innerHTML="",S(),b();try{const{hits:a,totalHits:i}=await g(p,s);if(u=Math.ceil((i||0)/m),!(a!=null&&a.length)){c("Sorry, there are no images matching your search query. Please, try again!");return}h(a),s<u&&$()}catch(a){console.error(a),c("Something went wrong. Please, try again later.")}finally{L(),n.form.reset()}}async function O(){if(!d){if(s>=u)return f();d=!0,b(),n.loadMoreBtn.disabled=!0;try{s+=1;const{hits:e}=await g(p,s);if(!(e!=null&&e.length))return f();h(e),E(),s>=u&&f()}catch(e){console.error(e),c("Something went wrong. Please, try again later.")}finally{L(),n.loadMoreBtn.disabled=!1,d=!1}}}function h(e){const r=e.map(x).join("");n.gallery.insertAdjacentHTML("beforeend",r),v.refresh()}function x({webformatURL:e,largeImageURL:r,tags:a,likes:i,views:t,comments:o,downloads:l}){return`
    <li class="gallery-item">
      <a class="gallery-link" href="${r}" rel="noopener noreferrer">
        <img class="gallery-image" src="${e}" alt="${R(a||"")}" loading="lazy" />
        <p class="gallery-descr">
          likes: <span class="descr-span">${i}</span>
          &nbsp; views: <span class="descr-span">${t}</span>
          &nbsp; comments: <span class="descr-span">${o}</span>
          &nbsp; downloads: <span class="descr-span">${l}</span>
        </p>
      </a>
    </li>`}function c(e){y.error({message:e,position:"topRight",maxWidth:432,closeOnClick:!0})}function b(){n.loader.style.display="flex"}function L(){n.loader.style.display="none"}function $(){n.loadMoreBtn.classList.remove("is-hidden")}function S(){n.loadMoreBtn.classList.add("is-hidden")}function f(){S(),y.info({message:"We're sorry, but you've reached the end of search results.",position:"topRight"})}function E(){const e=n.gallery.querySelector(".gallery-item");if(!e)return;const{height:r}=e.getBoundingClientRect();window.scrollBy({top:r*2+24,behavior:"smooth"})}function R(e){return String(e).replace(/[&<>"']/g,r=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[r])}
//# sourceMappingURL=index-Crr5YJ1O.js.map
